{"config":{"lang":["de"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Agent Shredder Doku","text":"<p>GERMAN For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"pages/app/","title":"Index","text":"<p>App</p>"},{"location":"pages/app/display/","title":"Display","text":"<p>Framebuffer</p>"},{"location":"pages/app/shredder/","title":"Shredder","text":"<p>wear leveling</p>"},{"location":"pages/app/update/","title":"Update","text":"<p>signing</p>"},{"location":"pages/hardware/","title":"Hardware","text":"<p>Schematic</p>"},{"location":"pages/hardware/accelerometer/","title":"Accelerometer","text":"<p>ST LIS3DH</p> <p>Datenblatt</p>"},{"location":"pages/hardware/battery/","title":"Battery","text":"<p>900 mAh</p>"},{"location":"pages/hardware/boost/","title":"5V Boost","text":"<p>Texas Instruments tps61030</p> <p>Datenblatt</p>"},{"location":"pages/hardware/charger/","title":"Charger","text":"<p>Texas Instruments bq2423xx</p> <p>Datenblatt</p>"},{"location":"pages/hardware/fuel-gauge/","title":"Fuel Gauge","text":"<p>Analog Devices MAX17055</p> <p>Datenblatt</p>"},{"location":"pages/hardware/i2c/","title":"Adressen","text":"<p>U3 RV3028 - 0x52</p> <p>U4 MAX17055 - 0x36</p> <p>U5 LIS3DH - 0x18</p>"},{"location":"pages/hardware/nanohat-oled/","title":"NanoHat OLED","text":"<p>NanoHat OLED Hat Wiki</p>"},{"location":"pages/hardware/nanopi/","title":"NanoPi NEO Core","text":"<p>NanoPi NEO Core Wiki</p> <p></p> <p></p>"},{"location":"pages/hardware/power-hat/","title":"Power Hat","text":""},{"location":"pages/hardware/rtc/","title":"RTC","text":"<p>Micro Crystal RV-3028</p> <p>Datenblatt</p> <p>Application Manual</p>"},{"location":"pages/linux/","title":"Index","text":"<p>Dietpi Kernel auf xxx gefreezt</p>"},{"location":"pages/linux/blkdiscard/","title":"blkdiscard","text":"<p>MMC CMD38</p> <p><code>blkdiscard --secure /dev/device</code></p> <p>wear leveling</p>"},{"location":"pages/linux/cryptsetup/","title":"cryptsetup","text":"<p>cryptocontainer erstellen:</p> <pre><code>truncate -s &lt;size&gt; &lt;containerfile&gt;\n echo -n &lt;password&gt; | cryptsetup -c aes-xts-plain64 -s 512 -h sha512 -y luksFormat &lt;containerfile&gt; -d -\n</code></pre> <p>\u00f6ffnen so: <code>echo -n &lt;password&gt; | sudo /usr/sbin/cryptsetup luksOpen &lt;containerfile&gt; &lt;cryptdevicename&gt; -d -</code></p>"},{"location":"pages/linux/fstab/","title":"fstab","text":"<p><code>/etc/fstab</code></p> <pre><code>tmpfs /tmp tmpfs size=100M,noatime,lazytime,nodev,nosuid,mode=1777\ntmpfs /var/log tmpfs size=50M,noatime,lazytime,nodev,nosuid\ntmpfs /media tmpfs size=20M,noatime,lazytime,nodev,nosuid,mode=1777\n</code></pre>"},{"location":"pages/linux/gadget/","title":"Mass Storage","text":""},{"location":"pages/linux/gadget/#serial","title":"Serial","text":"<p><code>/etc/systemd/system/usbcon.service</code></p> <pre><code>[Unit]\nDescription=USB console on ttyGS0\n\n#ConditionKernelCommandLine=usbcon\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\n\nExecStart=/sbin/modprobe g_serial\nExecStart=/bin/systemctl start serial-getty@ttyGS0.service\n\nExecStop=/bin/systemctl stop serial-getty@ttyGS0.service\nExecStop=/sbin/modprobe -r g_serial\n\n[Install]\nWantedBy=getty.target\n\n</code></pre>"},{"location":"pages/linux/i2c/","title":"I2C Bus aktivieren","text":"<p><code>/boot/dietpiEnv.txt</code></p> <p><code>overlay= ... i2c0 i2c2</code></p>"},{"location":"pages/linux/i2c/#clock-auf-1m-hoch-setzten","title":"Clock auf 1M hoch setzten","text":"<p>in /boot/...? <code>sudo dtc -I dtb -O dts sun8i-h3-nanopi-neo.dtb -o sun8i-h3-nanopi-neo.dts</code></p> <p>Edit section in *.dts and recompile the dts:</p> <p><code>dtc -I dts -O dtb sun8i-h3-nanopi-neo.dts -o sun8i-h3-nanopi-neo.dtb</code></p> <p>The original dtb had no clock frequency entries for any of the i2c buses: i2c0 (i2c@01c2ac00), i2c1 (i2c@01c2b000) and i2c2 (i2c@01c2b400). Add a line to the i2c@01c2b000 (i2c) section (or whichever bus you're wishing to change):</p> <p><code>clock-frequency = &lt;0xF4240&gt;;</code> </p> <p>400 khz: &lt;0x61A80&gt;  1000 khz: &lt;0xF4240&gt;</p>"},{"location":"pages/linux/i2c/#beispiel","title":"Beispiel","text":"<p><code>i2c@1c2ac00 {                         compatible = \"allwinner,sun6i-a31-i2c\";                         reg = &lt;0x1c2ac00 0x400&gt;;                         interrupts = &lt;0x00 0x06 0x04&gt;;                         clocks = &lt;0x03 0x3b&gt;;                         resets = &lt;0x03 0x2e&gt;;                         pinctrl-names = \"default\";                         pinctrl-0 = &lt;0x1a&gt;;                         status = \"disabled\";                         #address-cells = &lt;0x01&gt;;                         #size-cells = &lt;0x00&gt;;                         phandle = &lt;0x67&gt;;                         clock-frequency = &lt;0xF4240&gt;;                 };</code></p>"},{"location":"pages/linux/no-root/","title":"sudoers File","text":"<pre><code># Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) ALL\n\ndietpi ALL=(ALL) NOPASSWD: /home/dietpi/agent-shredder-stager/scripts/as-crypts$\ndietpi ALL=(ALL) NOPASSWD: /home/dietpi/agent-shredder-stager/scripts/as-gadget\ndietpi ALL=(ALL) NOPASSWD: /home/dietpi/agent-shredder-stager/scripts/as-utils\n</code></pre>"},{"location":"pages/linux/no-root/#polkit-fur-udisks","title":"polkit f\u00fcr udisks","text":"<p><code>/etc/polkit-1/rules.d/10-udisks2.rules</code></p> <pre><code>// See the polkit(8) man page for more information\n// about configuring polkit.\n\n// Allow udisks2 to mount devices without authentication\n// for users in the \"storage\" group.\npolkit.addRule(function(action, subject) {\n    if ((action.id == \"org.freedesktop.udisks2.filesystem-mount-system\" ||\n         action.id == \"org.freedesktop.udisks2.filesystem-mount\" ||\n         action.id == \"org.freedesktop.udisks2.filesystem-mount-other-seat\") &amp;&amp;\n        subject.isInGroup(\"storage\")) {\n        return polkit.Result.YES;\n    }\n});\n\n</code></pre> <p><code>groupadd storage</code> <code>usermod --append --groups storage dietpi</code> <code>systemctl restart polkit.service</code></p>"},{"location":"pages/linux/no-root/#keyboard","title":"keyboard","text":"<p>for python lib keyboard</p> <pre><code>sudo chmod +0666 /dev/uinput\n</code></pre> <p><code>/etc/udev/rules.d/12-input.rules</code></p> <pre><code>SUBSYSTEM==\"input\", MODE=\"0666\" GROUP=\"plugdev\"\nSUBSYSTEM==\"misc\", MODE=\"0666\" GROUP=\"plugdev\"\nSUBSYSTEM==\"tty\", MODE=\"0666\" GROUP=\"plugdev\"\n</code></pre> <pre><code>loginctl terminate-user $USER\n</code></pre> <p>logout/login/reboot</p>"},{"location":"pages/linux/no-root/#groups","title":"Groups","text":"<pre><code>sudo usermod -a -G tty,input,disk,i2c,storage dietpi\n</code></pre>"},{"location":"pages/linux/rsync/","title":"rsync","text":"<p><code>rsync -avWS --no-compress --info=progress2 --outbuf=L &lt;source&gt; &lt;destination&gt;</code></p>"},{"location":"pages/linux/secure-boot/","title":"Verified Boot","text":""},{"location":"pages/linux/secure-boot/#secure-boot","title":"Secure Boot","text":""},{"location":"pages/linux/secure-boot/#fel","title":"FEL","text":""},{"location":"pages/linux/systemd/","title":"Agent Shredder Service","text":"<p><code>/etc/systemd/system/agent-shredder.service</code></p> <pre><code>[Unit]\nDescription=Agent Shredder\nAfter=local-fs.target\nBefore=network.target\n\n[Service]\nType=simple\nRemainAfterExit=yes\nUser=root\nExecStart=/home/dietpi/agent-shredder-stager/stager.py\n\n[Install]\nWantedBy=network.target\n\n</code></pre>"},{"location":"pages/linux/udisks/","title":"udisks","text":"<p>zum mounten nutze ich <code>udisksctl mount -b /dev/sda1</code></p>"}]}